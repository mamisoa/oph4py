
<div class="container-fluid mb-1 patient-id sticky-top" id="wlItemDetails">
    <div class="row mb-3 d-flex justify-content-center align-items-center">
        <div id="patientIdDiv" class="col-4 text-end">
            <h2 class="patientName"></h2>
            <h3 class="patientDob text-muted"></h3>
            <h4 class="patientId fst-italic"></h4>
        </div>
        <div class="col-4" id="photoDiv">
            <img id="photoId" src="" alt="Photo from EID">
        </div>
    </div>
    <div class="row">
        <div class="col d-flex justify-content-start align-items-center">
            <a class="btn btn-primary" href="javascript:history.back()" role="button">Back</a>
        </div>
        <div class="col">
            <p>Task: #[[ = wlId ]] </p>
            <p>Timeslot: <span class="timeslot"></span></p>
        </div>
        <div class="col">
            <p>Modality: <span class="modality"></span></p>
            <p>Laterality: <span class="laterality"></span></p>
        </div>
        <div class="col">
            <p>Provider: <span class="provider"></span></p>
            <p>Senior: <span class="senior"></span></p>
        </div>
        <div class="col">
            <p>Warning: <span class="warning bg-danger text-wrap p-1" style="color: white;"></span></p>
            <p>Status: <span class="status"></span></p>
        </div>
        <div class="col d-flex justify-content-end align-items-center">
            <button class="btn btn-warning mx-2" id="btnUnlockTask" type="button">Unlock <i class="fas fa-unlock"></i></button>
            <button class="btn btn-primary mx-2" id="btnTaskDone" type="button">Done <i class="fas fa-check"></i></button>
        </div>
    </div>
    <div class="row">
        <div id="mdHistory" class="col d-flex justify-content-center align-items-center">
            Older MD
        </div>
    </div>
</div>

<script type="text/javascript">
const wlId = [[= wlId ]];
const wlDict = [[ = XML(wlDict) ]];
const wlObj = wlDict[0];
const providerDict = [[ = XML(providerDict) ]];
const providerObj = providerDict[0];
const seniorDict = [[ = XML(seniorDict) ]];
const seniorObj = seniorDict[0];
const patientObj = wlDict[0]['auth_user'];
const patientId = patientObj['id'];
const mdHistory = [[ 
    try: mdHistory
    except NameError: response.write('[]')
    else: response.write(XML(mdHistory))
    pass
    ]];

// MD history
mdHistory.forEach(function (arrayItem) {
    let id = arrayItem.id;
    let ts = arrayItem.requested_time;
    let setbtnclass = ""
    if (id == wlId) {
        setbtnclass = "disabled";
    };
    console.log("Id: ", id);
    console.log("Timeslot: ", ts);
    document.getElementById("mdHistory").innerHTML += '<button class="btn btn-primary '+setbtnclass+' mx-2 btnmdHistory" data-mdId="'+id+'" type="button">'+ts+'</button>';
    });

</script>